<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="714px" preserveAspectRatio="none" style="width:941px;height:714px;background:#FFFFFF;" version="1.1" viewBox="0 0 941 714" width="941px" zoomAndPan="magnify"><title>Flujo de Logout de Usuarios</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="220.8828" x="356.1477" y="27.9951">Flujo de Logout de Usuarios</text><rect fill="none" height="90.5313" style="stroke:#000000;stroke-width:1.5;" width="319.0884" x="517.6904" y="411.7109"/><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="30.6021" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="34" x2="34" y1="204.7813" y2="619.6406"/></g><g><title>Cliente Web/App</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="174.2554" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="177.7534" x2="177.7534" y1="204.7813" y2="619.6406"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="401.7271" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="405.5054" x2="405.5054" y1="204.7813" y2="619.6406"/></g><g><title>Servicio de</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="578.7437" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="582.6904" x2="582.6904" y1="204.7813" y2="619.6406"/></g><g><title>Base de Datos</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="769.1792" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="772.5796" x2="772.5796" y1="204.7813" y2="619.6406"/></g><g><title>Cache Redis</title><rect fill="#000000" fill-opacity="0.00000" height="414.8594" width="8" x="878.9785" y="204.7813"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="882.7788" x2="882.7788" y1="204.7813" y2="619.6406"/></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.2041" x="5" y="201.4795">Usuario</text><ellipse cx="34.6021" cy="136.9844" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.6021,144.9844 L34.6021,171.9844 M21.6021,152.9844 L47.6021,152.9844 M34.6021,171.9844 L21.6021,186.9844 M34.6021,171.9844 L47.6021,186.9844" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.2041" x="5" y="631.6357">Usuario</text><ellipse cx="34.6021" cy="643.4375" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.6021,651.4375 L34.6021,678.4375 M21.6021,659.4375 L47.6021,659.4375 M34.6021,678.4375 L21.6021,693.4375 M34.6021,678.4375 L47.6021,693.4375" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.0039" x="112.7534" y="173.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.0039" x="119.7534" y="193.4795">Cliente Web/App</text></g><g class="participant participant-tail" data-participant="client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131.0039" x="112.7534" y="618.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.0039" x="119.7534" y="638.6357">Cliente Web/App</text></g><g class="participant participant-head" data-participant="gateway"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="354.5054" y="157.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="361.5054" y="177.1826">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.6787" x="377.8877" y="193.4795">(APISIX)</text></g><g class="participant participant-tail" data-participant="gateway"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.4434" x="354.5054" y="618.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="361.5054" y="638.6357">API Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.6787" x="377.8877" y="654.9326">(APISIX)</text></g><g class="participant participant-head" data-participant="auth"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.1064" x="527.6904" y="157.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5332" x="543.9771" y="177.1826">Servicio de</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1064" x="534.6904" y="193.4795">Autenticaci&#243;n</text></g><g class="participant participant-tail" data-participant="auth"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.1064" x="527.6904" y="618.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5332" x="543.9771" y="638.6357">Servicio de</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1064" x="534.6904" y="654.9326">Autenticaci&#243;n</text></g><g class="participant participant-head" data-participant="userDB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.1992" x="719.5796" y="185.1826">Base de Datos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.498" x="739.9302" y="201.4795">Usuarios</text><path d="M755.1792,136.1875 C755.1792,126.1875 773.1792,126.1875 773.1792,126.1875 C773.1792,126.1875 791.1792,126.1875 791.1792,136.1875 L791.1792,162.1875 C791.1792,172.1875 773.1792,172.1875 773.1792,172.1875 C773.1792,172.1875 755.1792,172.1875 755.1792,162.1875 L755.1792,136.1875" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M755.1792,136.1875 C755.1792,146.1875 773.1792,146.1875 773.1792,146.1875 C773.1792,146.1875 791.1792,146.1875 791.1792,136.1875" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="userDB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.1992" x="719.5796" y="631.6357">Base de Datos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.498" x="739.9302" y="647.9326">Usuarios</text><path d="M755.1792,661.2344 C755.1792,651.2344 773.1792,651.2344 773.1792,651.2344 C773.1792,651.2344 791.1792,651.2344 791.1792,661.2344 L791.1792,687.2344 C791.1792,697.2344 773.1792,697.2344 773.1792,697.2344 C773.1792,697.2344 755.1792,697.2344 755.1792,687.2344 L755.1792,661.2344" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M755.1792,661.2344 C755.1792,671.2344 773.1792,671.2344 773.1792,671.2344 C773.1792,671.2344 791.1792,671.2344 791.1792,661.2344" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-head" data-participant="redis"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="836.7788" y="185.1826">Cache Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.3643" x="845.2964" y="201.4795">(Blacklist)</text><path d="M864.9785,136.1875 C864.9785,126.1875 882.9785,126.1875 882.9785,126.1875 C882.9785,126.1875 900.9785,126.1875 900.9785,136.1875 L900.9785,162.1875 C900.9785,172.1875 882.9785,172.1875 882.9785,172.1875 C882.9785,172.1875 864.9785,172.1875 864.9785,162.1875 L864.9785,136.1875" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M864.9785,136.1875 C864.9785,146.1875 882.9785,146.1875 882.9785,146.1875 C882.9785,146.1875 900.9785,146.1875 900.9785,136.1875" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="redis"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.3994" x="836.7788" y="631.6357">Cache Redis</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.3643" x="845.2964" y="647.9326">(Blacklist)</text><path d="M864.9785,661.2344 C864.9785,651.2344 882.9785,651.2344 882.9785,651.2344 C882.9785,651.2344 900.9785,651.2344 900.9785,661.2344 L900.9785,687.2344 C900.9785,697.2344 882.9785,697.2344 882.9785,697.2344 C882.9785,697.2344 864.9785,697.2344 864.9785,687.2344 L864.9785,661.2344" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M864.9785,661.2344 C864.9785,671.2344 882.9785,671.2344 882.9785,671.2344 C882.9785,671.2344 900.9785,671.2344 900.9785,661.2344" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="934.1782" x="0" y="235.3477"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="934.1782" y1="235.3477" y2="235.3477"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="934.1782" y1="238.3477" y2="238.3477"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="132.5996" x="400.7893" y="224.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="114.0737" x="406.7893" y="240.8481">Flujo de Logout</text><g class="message" data-participant-1="user" data-participant-2="client"><polygon fill="#181818" points="166.2554,275.0469,176.2554,279.0469,166.2554,283.0469,170.2554,279.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="34.6021" x2="172.2554" y1="279.0469" y2="279.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.4917" x="41.6021" y="273.981">Solicita logout</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="138.2261" y="273.981">1.0</text></g><g class="message" data-participant-1="client" data-participant-2="gateway"><polygon fill="#0000FF" points="393.7271,319.3125,403.7271,323.3125,393.7271,327.3125,397.7271,323.3125" style="stroke:#0000FF;stroke-width:1;"/><line style="stroke:#0000FF;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="178.2554" x2="399.7271" y1="323.3125" y2="323.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.4351" x="185.2554" y="303.1138">HTTP POST /auth/logout</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="344.8228" y="303.1138">1.1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.4438" x="185.2554" y="318.2466">{ACCESS_TOKEN}</text></g><g class="message" data-participant-1="gateway" data-participant-2="auth"><polygon fill="#800080" points="570.7437,363.5781,580.7437,367.5781,570.7437,371.5781,574.7437,367.5781" style="stroke:#800080;stroke-width:1;"/><line style="stroke:#800080;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="405.7271" x2="576.7437" y1="367.5781" y2="367.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.855" x="412.7271" y="347.3794">Redirige la petici&#243;n</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="542.7144" y="347.3794">1.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.4438" x="412.7271" y="362.5122">{ACCESS_TOKEN}</text></g><g class="message" data-participant-1="auth" data-participant-2="redis"><polygon fill="#181818" points="870.9785,392.7109,880.9785,396.7109,870.9785,400.7109,874.9785,396.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="582.7437" x2="876.9785" y1="396.7109" y2="396.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.4854" x="589.7437" y="391.645">Agrega token a blacklist</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="751.3613" y="391.645">2.1</text></g><path d="M517.6904,411.7109 L582.1333,411.7109 L582.1333,418.8438 L572.1333,428.8438 L517.6904,428.8438 L517.6904,411.7109" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.5313" style="stroke:#000000;stroke-width:1.5;" width="319.0884" x="517.6904" y="411.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="532.6904" y="424.7778">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="160.1177" x="597.1333" y="423.9214">[Token de Refresh existe]</text><g class="message" data-participant-1="auth" data-participant-2="userDB"><polygon fill="#181818" points="761.1792,461.1094,771.1792,465.1094,761.1792,469.1094,765.1792,465.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="582.7437" x2="767.1792" y1="465.1094" y2="465.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.2739" x="589.7437" y="444.9106">Elimina refresh token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="733.1499" y="444.9106">2.2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.1279" x="589.7437" y="460.0435">(revocaci&#243;n permanente)</text></g><g class="message" data-participant-1="userDB" data-participant-2="auth"><polygon fill="#181818" points="593.7437,490.2422,583.7437,494.2422,593.7437,498.2422,589.7437,494.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="587.7437" x2="772.1792" y1="494.2422" y2="494.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.3853" x="599.7437" y="489.1763">Confirmaci&#243;n</text></g><g class="message" data-participant-1="auth" data-participant-2="gateway"><polygon fill="#800080" points="416.7271,526.375,406.7271,530.375,416.7271,534.375,412.7271,530.375" style="stroke:#800080;stroke-width:1;"/><line style="stroke:#800080;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="410.7271" x2="581.7437" y1="530.375" y2="530.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.6313" x="422.7271" y="525.3091">Logout Ok</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="493.4907" y="525.3091">3.1</text></g><g class="message" data-participant-1="gateway" data-participant-2="client"><polygon fill="#0000FF" points="189.2554,555.5078,179.2554,559.5078,189.2554,563.5078,185.2554,559.5078" style="stroke:#0000FF;stroke-width:1;"/><line style="stroke:#0000FF;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="183.2554" x2="404.7271" y1="559.5078" y2="559.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.1582" x="195.2554" y="554.4419">HTTP 200 - Ok</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="292.5459" y="554.4419">3.2</text></g><g class="message" data-participant-1="client" data-participant-2="client"><line style="stroke:#181818;stroke-width:1;" x1="178.2554" x2="220.2554" y1="588.6406" y2="588.6406"/><line style="stroke:#181818;stroke-width:1;" x1="220.2554" x2="220.2554" y1="588.6406" y2="601.6406"/><line style="stroke:#181818;stroke-width:1;" x1="179.2554" x2="220.2554" y1="601.6406" y2="601.6406"/><polygon fill="#181818" points="189.2554,597.6406,179.2554,601.6406,189.2554,605.6406,185.2554,601.6406" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.3101" x="185.2554" y="583.5747">Elimina tokens almacenados</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23.0293" x="375.6978" y="583.5747">3.3</text></g><rect fill="#DDDDDD" height="58.8906" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="252.8809" x="340.1487" y="54.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.54" x="345.1487" y="72.292">Comunicaciones:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="345.1487" y="88.5889">&#160;&#160;</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0117" x="354.0491" y="88.5889">REST</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189.0684" x="390.0608" y="88.5889">: Comunicaci&#243;n HTTP REST</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="345.1487" y="104.8857">&#160;&#160;</text><text fill="#800080" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.832" x="354.0491" y="104.8857">gRPC</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.3652" x="390.8811" y="104.8857">: Comunicaci&#243;n gRPC</text><!--SRC=[TLBRRjD057pVhpWABwcba3Hzivf8YHkW0f4eDWA987HYdpfBDhlMUbr0YA_Y4_fZtOlTk0XUB7jtPZndvXXk1C7WbMY-AIW8tgbIDSQzVQWRr5pL0yO4bIGBCAfYYJerakUOSoMfZXd0TQw4ql5UD3JVhjBiUkmFvZ6SiGz_9Bp9iWqu0C2PLJMw4ZGljvlaVpntPodEGF316CFSA0s3rk80i8Qc9iqgr8Rdl49fO908Jj8GVAJzU55L7fNxi-UunUOMNgEXx_Xp9uVsAxtzTE7HPJXz3az9tziFbzPEBXfZzJgldeIDER023UwnjiaktTF6UOD6rJlvb6hd-MRP0oUO7mYsL70B7Iu5vaV1QnFSQ7VCs6m6VxSrcp7cj60qRoUC8LN2kZG88c2YwFBb98fOk8VHvnUkiI-MqKuPXuOsQzlGs0qnxZ4lesWdVosIP9McNxFrszNxtuorHASLUdHgZXdx4JGl2GH2HIuyLwLJclvBoP5WPDb-nXWMfQOIxS8TIGB2lWl2AaoT5uR2GEPl2vVNdQRw0FJ3GiWk5q0GdBS9nx0I_CGbMlq03SfEpViPQhfNtS9Lf4yetUfSUAsWuUs5uH8bxxZ5UBY7CB-MuQVzC9wYROjQ7-q_h_m4lV2w8hhgV0_JoGH67M7QA-wCwuRomzZ54zOIIInKxKbNKVG8]--></g></svg>